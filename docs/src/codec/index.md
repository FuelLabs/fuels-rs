# Codec

Encoding and decoding is done as per [the fuel spec](https://specs.fuel.network/master/abi/argument-encoding.html). To this end `fuels` makes use of the [AbiEncoder](https://docs.rs/fuels/latest/fuels/core/codec/struct.AbiEncoder.html) and the [AbiDecoder](https://docs.rs/fuels/latest/fuels/core/codec/struct.AbiDecoder.html).

## Prerequisites for decoding/encoding

To encode a type you need convert it into a [`Token`](https://docs.rs/fuels/latest/fuels/types/enum.Token.html). This is commonly done by implementing the [Tokenizable](https://docs.rs/fuels/latest/fuels/core/traits/trait.Tokenizable.html) trait. 

To decode you also need to provide a [`ParamType`](https://docs.rs/fuels/latest/fuels/types/param_types/enum.ParamType.html) describing the schema of the type in question. This is commonly done by implementing the [Parameterize](https://docs.rs/fuels/latest/fuels/core/traits/trait.Parameterize.html) trait.

All types generated by the [`abigen!`](../abigen/index.md) macro implement both the `Tokenizable` and `Parameterize` traits. 

`fuels` also contains implementations for:
- `Tokenizable` for the `fuels`-owned types listed [here](https://docs.rs/fuels/latest/fuels/core/traits/trait.Tokenizable.html#implementors) as well as [for some foreign types](https://docs.rs/fuels/0.46.0/fuels/core/traits/trait.Tokenizable.html#foreign-impls) (such as `u8`, `u16`, `std::vec::Vec<T: Tokenizable>`, etc.).
- `Parameterize` for the `fuels`-owned types listed [here](https://docs.rs/fuels/latest/fuels/core/traits/trait.Parameterize.html#implementors) as well as [for some foreign types](https://docs.rs/fuels/0.46.0/fuels/core/traits/trait.Parameterize.html#foreign-impls) (such as `u8`, `u16`, `std::vec::Vec<T: Parameterize>`, etc.).


## Deriving the traits

Both `Tokenizable` and `Parameterize` can be derived for `struct`s and `enum`s if all inner types implement the derived traits:
```rust,ignore
{{#include ../../../examples/macros/src/lib.rs:deriving_traits}}
```
> Note:
> Deriving `Tokenizable` on `enum`s requires that all variants also implement `Parameterize`.

### Tweaking the derivation
#### Changing the location of imports
The derived code expects that the `fuels` package is accessible through `::fuels`. If this is not the case then the derivation macro needs to be given the locations of `fuels::types` and `fuels::core`.
```rust,ignore
{{#include ../../../examples/macros/src/lib.rs:deriving_traits_paths}}
```
#### Generating no-std code
If you want `no-std` generated code:
```rust,ignore
{{#include ../../../examples/macros/src/lib.rs:deriving_traits_nostd}}
```

